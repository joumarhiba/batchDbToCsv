package fr.cnamts.ex.batch.item.processor;

import java.text.SimpleDateFormat;
import java.time.LocalDate;
import java.time.format.DateTimeFormatter;
import java.util.Date;

import org.dozer.DozerBeanMapper;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.batch.item.ItemProcessor;
import org.springframework.beans.factory.annotation.Autowired;

import fr.cnamts.ex.batch.bo.Employee;
import fr.cnamts.ex.batch.bo.EmployeeDto;
import fr.cnamts.ex.batch.tasklet.ValiderExistDbTasklet;

public class ImportEmployeeProcessor implements ItemProcessor<Employee, EmployeeDto> {

	private static final Logger LOGGER = LoggerFactory.getLogger(ImportEmployeeProcessor.class);

	@Autowired
	private DozerBeanMapper dozerBeanMapper;
	
	@Override
	public EmployeeDto process(Employee employee) throws Exception {
			
	EmployeeDto employeeDto = dozerBeanMapper.map(employee,EmployeeDto.class);
			
			String pattern = "dd-MM-yyyy";
			SimpleDateFormat simpleDateFormat = new SimpleDateFormat(pattern);
			String dateString = simpleDateFormat.format(new Date());
//			Date date1=new SimpleDateFormat("dd-MM-yyyy").parse(dateString);
//			LOGGER.info("date string format : "+dateString);
//			LOGGER.info("date format : "+date1);
			
			 SimpleDateFormat format = new SimpleDateFormat("dd-MM-yyyy");
			    Date date = format.parse(dateString);
			    System.out.println(date);
			employeeDto.setCreatedAt(date);


		
		return employeeDto;
	}

}
